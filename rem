#!/usr/bin/env raku

unit sub MAIN(
    #| the regex to match against file names
    Str $regex,
    #| print file names as they are deleted
    Bool :v(:$verbose) = False,
    #| don't actually delete anything, implies --verbose
    Bool :d(:$dry-run) = False
);

my $regex-object = rx/<$regex>/;

for dir(".") {
    my $basename = .basename;
    next unless $basename ~~ $regex-object;

    say "$basename" if $verbose || $dry-run;
    .unlink unless $dry-run;
}
